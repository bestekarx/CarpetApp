<?xml version="1.0" encoding="utf-8" ?>
<services:ContentPageBase
    BackgroundColor="{StaticResource MainBgColor}"
    x:Class="CarpetApp.Views.ReceivedListPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:services="clr-namespace:CarpetApp.Services"
    xmlns:sfComboBox="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit">
    <ContentPage.Content>
        <Grid>
            <VerticalStackLayout>
                <!-- Filtreler -->
                <Grid Padding="10" ColumnSpacing="10">
                    <DatePicker x:Name="DateFilter" Date="{Binding SelectedDate}" />
                    <sfComboBox:SfComboBox
                        Grid.Column="1"
                        ItemsSource="{Binding VehicleList}"
                        DisplayMemberPath="DataText"
                        SelectedItem="{Binding SelectedVehicle}"
                        Placeholder="Araç seçin"
                        Style="{StaticResource DefaultComboBox}" />
                    <sfComboBox:SfComboBox
                        Grid.Column="2"
                        ItemsSource="{Binding AreaList}"
                        DisplayMemberPath="Name"
                        SelectedItem="{Binding SelectedArea}"
                        Placeholder="Bölge seçin"
                        Style="{StaticResource DefaultComboBox}" />
                </Grid>
                <!-- Liste -->
                <CollectionView x:Name="ReceivedList" ItemsSource="{Binding ReceivedItems}" SelectionMode="None" IsVisible="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Margin="10,5" Padding="10" CornerRadius="10" BackgroundColor="White" HasShadow="True">
                                <VerticalStackLayout>
                                    <Label Text="{Binding CustomerName}" FontAttributes="Bold" FontSize="18" />
                                    <Label Text="{Binding PickupDate, StringFormat='Alınma: {0:dd.MM.yyyy HH:mm}'}" FontSize="14" />
                                    <Label Text="{Binding Note}" FontSize="14" />
                                    <Label Text="{Binding Address}" FontSize="14" />
                                    <HorizontalStackLayout>
                                        <Label Text="{Binding AreaName}" FontSize="13" />
                                        <Label Text="{Binding VehicleName}" FontSize="13" Margin="10,0,0,0" />
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
            <ActivityIndicator IsRunning="{Binding IsLoading}" IsVisible="{Binding IsLoading}" Color="DarkGray" VerticalOptions="Center" HorizontalOptions="Center" />
        </Grid>
    </ContentPage.Content>
    <!-- ContentPage.Behaviors ve EventToCommandBehavior kaldırıldı -->
</services:ContentPageBase> 